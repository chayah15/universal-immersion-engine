<div id="uie-enchant-root" style="height:100%; width:100%; position:relative;">
  <style>
    #uie-enchant-root { color:#fff; font-family: serif; }
    #uie-enchant-bg { position:absolute; inset:0; background-image:url('https://user.uploads.dev/file/1492c0a3723bc2e268163085a74804b7.png'); background-size:cover; background-position:center; }
    #uie-enchant-glass { position:absolute; inset:0; background:rgba(0,0,0,0.62); backdrop-filter: blur(4px); }
    #uie-enchant-ui { position:relative; z-index:1; height:100%; display:flex; flex-direction:column; }
    #uie-enchant-top { display:flex; gap:10px; align-items:center; padding:12px; border-bottom:1px solid rgba(255,255,255,0.12); }
    #uie-enchant-title { font-weight:900; letter-spacing:1px; color:#babbf1; }
    .uie-enchant-btn { height:36px; padding:0 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:rgba(0,0,0,0.25); color:#fff; font-weight:900; cursor:pointer; }
    .uie-enchant-btn.primary { border:none; background:#babbf1; color:#000; }
    .uie-enchant-btn.danger { border:1px solid rgba(243,139,168,0.35); color:#f38ba8; }
    #uie-enchant-grid { flex:1; display:grid; grid-template-columns: 1fr 1fr 1fr; gap:12px; padding:12px; overflow:hidden; }
    .uie-enchant-pane { border-radius:16px; border:1px solid rgba(255,255,255,0.12); background:rgba(0,0,0,0.22); overflow:hidden; display:flex; flex-direction:column; }
    .uie-enchant-pane .head { padding:10px 12px; font-weight:900; border-bottom:1px solid rgba(255,255,255,0.10); color:#babbf1; display:flex; gap:10px; align-items:center; }
    .uie-enchant-pane .body { padding:12px; overflow:auto; }
    .uie-enchant-list { display:flex; flex-direction:column; gap:8px; }
    .uie-enchant-row { display:flex; gap:10px; align-items:center; padding:10px; border-radius:14px; border:1px solid rgba(255,255,255,0.10); background:rgba(255,255,255,0.04); cursor:pointer; }
    .uie-enchant-row.active { border-color:rgba(186,187,241,0.55); box-shadow: 0 0 18px rgba(186,187,241,0.16); }
    .uie-enchant-row .icon { width:40px; height:40px; border-radius:14px; border:1px solid rgba(255,255,255,0.10); background:rgba(0,0,0,0.25); display:grid; place-items:center; overflow:hidden; flex:0 0 auto; }
    .uie-enchant-row .icon img { width:100%; height:100%; object-fit:cover; }
    .uie-enchant-row .mid { flex:1; min-width:0; }
    .uie-enchant-row .name { font-weight:900; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .uie-enchant-row .sub { opacity:0.75; font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .uie-enchant-pill { display:inline-flex; align-items:center; gap:6px; height:28px; padding:0 10px; border-radius:999px; border:1px solid rgba(255,255,255,0.10); background:rgba(0,0,0,0.22); font-weight:900; font-size:12px; }
    .uie-enchant-field label { display:block; font-size:12px; opacity:0.75; font-weight:900; margin-bottom:6px; }
    .uie-enchant-field input, .uie-enchant-field textarea {
      width:100%; border-radius:14px; border:1px solid rgba(255,255,255,0.12); background:rgba(0,0,0,0.25); color:#fff; padding:10px 12px; outline:none;
    }
    .uie-enchant-field textarea { min-height:110px; resize:vertical; }
    #uie-enchant-log { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; font-size:12px; line-height:1.45; white-space:pre-wrap; color:rgba(255,255,255,0.82); }
    @media (max-width: 900px) { #uie-enchant-grid { grid-template-columns: 1fr; overflow:auto; } .uie-enchant-pane { min-height: 260px; } }
  </style>
  <div id="uie-enchant-bg"></div>
  <div id="uie-enchant-glass"></div>
  <div id="uie-enchant-ui">
    <div id="uie-enchant-top">
      <button class="uie-enchant-btn" data-action="back-create">Back</button>
      <div id="uie-enchant-title">ENCHANTMENT</div>
      <div style="margin-left:auto; display:flex; gap:10px;">
        <button class="uie-enchant-btn" onclick="uie.phone.openBooksGuide('guide-crafting')" style="border:none; background:transparent; color:#babbf1;"><i class="fa-solid fa-circle-question"></i></button>
        <button class="uie-enchant-btn danger" id="uie-enchant-reset">Reset</button>
        <button class="uie-enchant-btn primary" id="uie-enchant-apply">Apply</button>
      </div>
    </div>
    <div id="uie-enchant-grid">
      <div class="uie-enchant-pane">
        <div class="head">Base Item <span style="margin-left:auto; opacity:0.7; font-size:12px;">Equipment</span></div>
        <div class="body">
          <div id="uie-enchant-base" class="uie-enchant-list"></div>
          <div style="margin-top:10px; opacity:0.75; font-size:12px; font-weight:800;">Includes inventory + equipped items.</div>
        </div>
      </div>
      <div class="uie-enchant-pane">
        <div class="head">Components <span style="margin-left:auto; opacity:0.7; font-size:12px;">Runes/Gems</span></div>
        <div class="body">
          <input id="uie-enchant-search" class="uie-alchemy-search" style="height:38px; width:100%; border-radius:14px; border:1px solid rgba(255,255,255,0.12); background:rgba(0,0,0,0.25); color:#fff; padding:0 12px; outline:none;" placeholder="Search components...">
          <div id="uie-enchant-components" class="uie-enchant-list" style="margin-top:10px;"></div>
        </div>
      </div>
      <div class="uie-enchant-pane">
        <div class="head">Effect</div>
        <div class="body" style="display:flex; flex-direction:column; gap:10px;">
          <div class="uie-enchant-field">
            <label>Enchantment Name</label>
            <input id="uie-enchant-name" placeholder="e.g. Rune of Ember">
          </div>
          <div class="uie-enchant-field">
            <label>Status Effects (comma)</label>
            <input id="uie-enchant-fx" placeholder="Burning (1 turn), Fire Res +5%">
          </div>
          <div class="uie-enchant-field">
            <label>Description</label>
            <textarea id="uie-enchant-desc" placeholder="Reference description..."></textarea>
          </div>
          <div class="uie-enchant-field">
            <label>Selected</label>
            <div id="uie-enchant-selected" style="display:flex; flex-wrap:wrap; gap:8px;"></div>
          </div>
          <div style="margin-top:auto;">
            <div class="uie-enchant-field">
              <label>Log</label>
              <div id="uie-enchant-log"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
