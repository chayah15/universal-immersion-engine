<style>
  #uie-journal-window{ top: 80px; left: 80px; transform:none; }
  @media (max-width: 700px), (pointer: coarse) {
    #uie-journal-window {
      position: fixed !important;
      inset: auto !important;
      top: 12vh !important;
      left: 3vw !important;
      transform: none !important;
      width: 94vw !important;
      height: 80vh !important;
      max-width: 94vw !important;
      max-height: 80vh !important;
    }
  }
</style>
<div id="uie-journal-window" class="uie-window" style="display:none; width:700px; height:760px; background:#0b0f15;">
    <div class="uie-header" style="border-bottom:1px solid rgba(203,163,92,0.35); background:linear-gradient(90deg,#1b202b,#0e121a);">
        <div class="uie-info">
            <h2 style="margin:0; font-family:serif; color:#cba35c; letter-spacing:1px;">Journal</h2>
            <div id="uie-journal-counts" style="font-size:12px; color:#aaa;">â€”</div>
        </div>
        <i class="fa-solid fa-wand-magic-sparkles" id="uie-journal-sparkle" style="color:#cba35c; cursor:pointer; margin-left:auto; margin-right:10px;"></i>
        <div class="uie-dropdown" id="uie-journal-menu" style="position:absolute; top:44px; right:44px; background:#111; border:1px solid rgba(203,163,92,0.5); border-radius:10px; padding:6px; display:none; flex-direction:column; gap:6px; z-index:20010; min-width:200px;">
            <div class="uie-dd-item" id="uie-journal-act-new" style="padding:10px 12px; border-radius:8px; cursor:pointer; color:#fff; background:rgba(255,255,255,0.06);"><i class="fa-solid fa-plus" style="width:18px; color:#cba35c;"></i> New Entry</div>
            <div class="uie-dd-item" onclick="uie.phone.openBooksGuide('guide-journal')" style="padding:10px 12px; border-radius:8px; cursor:pointer; color:#fff; background:rgba(255,255,255,0.06);"><i class="fa-solid fa-circle-question" style="width:18px; color:#cba35c;"></i> Help / Guide</div>
            <div class="uie-dd-item" id="uie-journal-act-gen" style="padding:10px 12px; border-radius:8px; cursor:pointer; color:#fff; background:rgba(255,255,255,0.06);"><i class="fa-solid fa-wand-magic-sparkles" style="width:18px; color:#cba35c;"></i> Generate</div>
            <div class="uie-dd-item" id="uie-journal-act-extract" style="padding:10px 12px; border-radius:8px; cursor:pointer; color:#fff; background:rgba(255,255,255,0.06);"><i class="fa-solid fa-file-import" style="width:18px; color:#cba35c;"></i> Extract</div>
        </div>
        <i class="fa-solid fa-xmark uie-close-btn" id="uie-journal-close"></i>
    </div>
    
    <style>
        @media (max-width: 600px) {
            #uie-journal-window > div:nth-of-type(2) { flex-direction: column !important; }
            .uie-journal-sidebar { width: 100% !important; flex-direction: row !important; overflow-x: auto; padding-top: 0 !important; border-right: none !important; border-bottom: 1px solid rgba(255,255,255,0.1); }
            .uie-journal-sidebar .uie-tab { flex: 0 0 auto; padding: 10px !important; border-left: none !important; border-bottom: 3px solid transparent; }
        }
    </style>

    <div style="display:flex; height:100%; min-height:400px;">
        <div class="uie-journal-sidebar" style="width:150px; background:#161b22; border-right:1px solid rgba(255,255,255,0.08); padding-top:10px; display:flex; flex-direction:column;">
            <div class="uie-tab" data-tab="active" style="padding:14px 12px; cursor:pointer; color:#888; border-left:3px solid transparent; font-size:0.95em;"><i class="fa-solid fa-bolt" style="width:18px;"></i> Active</div>
            <div class="uie-tab" data-tab="pending" style="padding:14px 12px; cursor:pointer; color:#888; border-left:3px solid transparent; font-size:0.95em;"><i class="fa-regular fa-hourglass" style="width:18px;"></i> Pending</div>
            <div class="uie-tab" data-tab="codex" style="padding:14px 12px; cursor:pointer; color:#888; border-left:3px solid transparent; font-size:0.95em;"><i class="fa-solid fa-feather-pointed" style="width:18px;"></i> Codex</div>
            <div class="uie-tab" data-tab="abandoned" style="padding:14px 12px; cursor:pointer; color:#888; border-left:3px solid transparent; font-size:0.95em;"><i class="fa-solid fa-ban" style="width:18px;"></i> Failed</div>
            <div class="uie-tab" data-tab="completed" style="padding:14px 12px; cursor:pointer; color:#888; border-left:3px solid transparent; font-size:0.95em;"><i class="fa-solid fa-check" style="width:18px;"></i> Completed</div>
        </div>

        <div class="uie-content" id="uie-journal-content" style="flex:1; padding:0; color:#ccc; display:flex; flex-direction:column; min-height:0;">
            <div style="padding:12px; border-bottom:1px solid rgba(255,255,255,0.08); display:flex; gap:10px; align-items:center;">
                <div id="uie-journal-tab-title" style="font-weight:900; color:#f1c40f; font-family:serif; letter-spacing:0.6px;">Active</div>
            </div>
            <div id="uie-journal-list" style="padding:14px; overflow:auto; flex:1; min-height:0;">
                <div style="text-align:center; margin-top:50px; color:#666;">No entries.</div>
            </div>
        </div>
    </div>

    <!-- TEMPLATES -->
    <template id="uie-template-codex-entry">
        <div class="uie-codex-entry" style="border:1px solid rgba(255,255,255,0.10); border-left:4px solid #cba35c; background:rgba(0,0,0,0.20); border-radius:14px; padding:12px; margin-bottom:10px; cursor:pointer;">
            <div style="display:flex; gap:10px; align-items:center;">
                <div class="codex-title" style="font-weight:900; color:#cba35c;"></div>
                <div class="codex-date" style="margin-left:auto; font-size:12px; opacity:0.7;"></div>
            </div>
            <div class="codex-meta" style="margin-top:4px; color:rgba(255,255,255,0.70); font-weight:800; font-size:12px;"></div>
            <div class="uie-codex-body" style="display:none; margin-top:10px; color:#ddd; line-height:1.55; white-space:pre-wrap;"></div>
            <div class="uie-codex-actions" style="display:none; margin-top:10px; gap:10px;">
                <button class="uie-codex-edit" style="height:34px; padding:0 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:rgba(0,0,0,0.25); color:#fff; font-weight:900; cursor:pointer;">Edit</button>
                <button class="uie-codex-del" style="height:34px; padding:0 12px; border-radius:12px; border:1px solid rgba(243,139,168,0.35); background:rgba(0,0,0,0.25); color:#f38ba8; font-weight:900; cursor:pointer;">Delete</button>
            </div>
        </div>
    </template>

    <template id="uie-template-quest-entry">
        <div class="uie-quest-entry" style="border:1px solid rgba(255,255,255,0.10); background:rgba(0,0,0,0.20); border-radius:14px; padding:12px; margin-bottom:10px;">
            <div class="uie-quest-title" style="font-weight:900; color:#f1c40f;"></div>
            <div class="uie-quest-desc" style="color:#bbb; margin-top:6px; line-height:1.45;"></div>
            <div class="uie-quest-actions" style="margin-top:10px; display:none; gap:10px;"></div>
        </div>
    </template>
</div>
