<style>
  #uie-battle-window{ top: 80px; left: 80px; transform:none; }
  @media (max-width: 700px), (pointer: coarse) {
    #uie-battle-window {
      position: fixed !important;
      inset: auto !important;
      top: 12vh !important;
      left: 3vw !important;
      transform: none !important;
      width: 94vw !important;
      height: 80vh !important;
      max-width: 94vw !important;
      max-height: 80vh !important;
    }
  }
</style>
<div id="uie-battle-window" class="uie-window" style="display:none; width:min(780px, 92vw); height:min(760px, 92vh); background:rgba(0,0,0,0.18); backdrop-filter: blur(8px); border:1px solid rgba(203,163,92,0.45);">
  <div class="uie-header" style="border-bottom:1px solid rgba(203,163,92,0.35); background:linear-gradient(90deg,#1b202b,#0e121a);">
    <div class="uie-info">
      <h2 style="margin:0; font-family:serif; color:#cba35c; letter-spacing:1px;">War Room</h2>
      <div style="font-size:12px; color:#aaa;" id="uie-battle-sub">Battle tracker</div>
    </div>
    <button id="uie-battle-scan" style="margin-left:auto; height:34px; padding:0 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:rgba(0,0,0,0.25); color:#fff; font-weight:900; cursor:pointer;">Scan</button>
    <button id="uie-battle-auto" style="margin-left:10px; height:34px; padding:0 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:rgba(0,0,0,0.25); color:#fff; font-weight:900; cursor:pointer;">Auto: OFF</button>
    <button id="uie-battle-dice-toggle" style="margin-left:10px; height:34px; padding:0 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:rgba(0,0,0,0.25); color:#fff; font-weight:900; cursor:pointer;">Dice: OFF</button>
    <button id="uie-battle-dice-roll" style="margin-left:10px; height:34px; padding:0 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:rgba(203,163,92,0.18); color:#cba35c; font-weight:900; cursor:pointer;">Roll</button>
    <i class="fa-solid fa-xmark uie-close-btn" id="uie-battle-close"></i>
  </div>

  <div class="uie-content" style="padding:12px; overflow:auto; height:calc(100% - 54px); display:grid; grid-template-columns: 1fr; gap:12px;">
    <div style="border-radius:18px; border:1px solid rgba(255,255,255,0.10); background:radial-gradient(120% 120% at 40% 20%, rgba(40,24,16,0.55) 0%, rgba(10,6,5,0.70) 60%, rgba(0,0,0,0.82) 100%); padding:12px;">
      <div style="display:flex; gap:12px; flex-wrap:wrap;">
        <div style="flex:1; min-width:260px; border-radius:16px; border:1px solid rgba(255,255,255,0.10); background:rgba(0,0,0,0.20); padding:12px;">
          <div style="font-weight:900; color:#f1c40f; margin-bottom:10px;">Enemies</div>
          <div id="uie-battle-enemies"></div>
        </div>
        <div style="flex:1; min-width:260px; border-radius:16px; border:1px solid rgba(255,255,255,0.10); background:rgba(0,0,0,0.20); padding:12px;">
          <div style="font-weight:900; color:#89b4fa; margin-bottom:10px;">Turn Order</div>
          <div id="uie-battle-turn"></div>
        </div>
      </div>
    </div>

    <div style="border-radius:18px; border:1px solid rgba(255,255,255,0.10); background:rgba(0,0,0,0.22); padding:12px;">
      <div style="font-weight:900; color:#cba35c; margin-bottom:10px;">Battle Log</div>
      <div id="uie-battle-log" style="font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; font-size:12px; line-height:1.45; white-space:pre-wrap; color:rgba(255,255,255,0.82);"></div>
    </div>
  </div>
</div>
