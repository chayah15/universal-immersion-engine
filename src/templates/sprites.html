<div id="uie-sprites-window" class="uie-window" style="display:none; width:min(720px, 92vw); height:min(820px, 92vh);">
  <div class="uie-header" style="padding:10px 12px; display:flex; align-items:center; gap:10px; border-bottom:1px solid rgba(255,255,255,0.10);">
    <div style="font-weight:900; color:#cba35c; letter-spacing:0.8px;">SPRITE LIBRARY</div>
    <div style="margin-left:auto; display:flex; gap:8px; align-items:center;">
      <button id="uie-sprites-close" title="Close" style="height:34px; width:44px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:rgba(0,0,0,0.25); color:#fff; font-weight:900; cursor:pointer; touch-action:manipulation;"><i class="fa-solid fa-xmark"></i></button>
    </div>
  </div>

  <div style="padding:12px; display:flex; flex-direction:column; gap:10px; overflow:auto;">
    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <div style="flex:1; min-width:240px;">
        <div style="font-weight:900; font-size:12px; color:#ddd; margin-bottom:6px;">Sprite Set</div>
        <select id="uie-sprites-set" style="width:100%; height:40px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:#222; color:#fff; padding:0 10px;">
          <option value="">(None)</option>
        </select>
      </div>
      <div style="flex:1; min-width:240px;">
        <div style="font-weight:900; font-size:12px; color:#ddd; margin-bottom:6px;">New Set Name</div>
        <div style="display:flex; gap:6px;">
          <input id="uie-sprites-new" type="text" placeholder="Ren Takahara" style="flex:1; height:40px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:#222; color:#fff; padding:0 10px;">
          <button id="uie-sprites-create" style="width:44px; height:40px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:rgba(205,127,50,0.20); color:#ffd8bf; font-weight:900; cursor:pointer;">+</button>
        </div>
      </div>
    </div>

    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <div style="flex:1; min-width:240px;">
        <div style="font-weight:900; font-size:12px; color:#ddd; margin-bottom:6px;">Category</div>
        <select id="uie-sprites-cat" style="width:100%; height:40px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:#222; color:#fff; padding:0 10px;">
          <option value="default">Default (SillyTavern)</option>
          <option value="life_sim">Life Immersion Sim</option>
          <option value="fantasy_rpg">Fantasy RPG</option>
          <option value="custom">Custom</option>
        </select>
      </div>
      <div style="flex:1; min-width:240px;">
        <div style="font-weight:900; font-size:12px; color:#ddd; margin-bottom:6px;">Add Custom Expression</div>
        <div style="display:flex; gap:6px;">
          <input id="uie-sprites-add-key" type="text" placeholder="bass-0" style="flex:1; height:40px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:#222; color:#fff; padding:0 10px;">
          <button id="uie-sprites-add" style="width:44px; height:40px; border-radius:12px; border:1px solid rgba(255,255,255,0.14); background:rgba(0,0,0,0.25); color:#fff; font-weight:900; cursor:pointer;">+</button>
        </div>
      </div>
    </div>

    <div style="opacity:0.8; font-size:12px;">
      Sprites are chosen by the speaker name. If a message has <b>[mood: anger]</b> it will use that expression key; otherwise it uses <b>neutral</b>.
    </div>

    <div id="uie-sprites-list" style="display:flex; flex-direction:column; gap:8px;"></div>
  </div>
</div>

